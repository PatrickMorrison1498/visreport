{% extends 'base.html' %}
{% block content %}
{% load static %}


{% load leaflet_tags %}

<head>
    {% leaflet_js %}
    {% leaflet_css %}

    <!-- style tag and django-leaflet tag here -->
    <style media="screen">
        #map { width:100%; height:100% }
      </style>

    <script src="{% static 'bower_components/leaflet-ajax/dist/leaflet.ajax.min.js' %}"></script>
    <script src="{% static 'bower_components/spin.js/spin.min.js' %}"></script>
    <script src="{% static 'bower_components/leaflet-spin/leaflet.spin.js' %}"></script>

</head>
<body>
    <a href="{% url 'sites' %}">json</a>
    <script type="text/javascript">
        function map_init_basic (map, options) {
              var geojsonSiteLayer = new L.GeoJSON.AJAX("{% url 'sites' %}", { 
                  onEachFeature:function(feature, layer) {
                       layer.bindTooltip(feature.properties.site_name.toString());
                       layer.bindPopup(feature.properties.site_name.toString());
                   }
               });
              geojsonSiteLayer.addTo(map);
          }
     </script>
     
    {% leaflet_map "map" callback="window.map_init_basic" %}
</body>


{% endblock %}
